% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/weighting_functions.R
\name{kw.crf}
\alias{kw.crf}
\title{Calculate KW-CRF pseudo-weights}
\usage{
kw.crf(psa_dat, wt, rsp_name, formula, tune_mincriterion, covars,
  h = NULL, krn = "triang", Large = F, rm.s = F)
}
\arguments{
\item{psa_dat}{Dataframe of the combined non-probability and probability sample}

\item{wt}{Name of the weight variable in psa_dat
(common weights of 1 for non-probability sample, and survey weights for probability sample)}

\item{rsp_name}{Name of the non-probability sample membership indicator in psa_dat
(1 for non-probability sample units, and 0 for probability sample units)}

\item{formula}{Formula of the propensity model
(see cforest() in partykit package)}

\item{tune_mincriterion}{A vector of values for the tuning parameter mincriterion
(see cforest() in partykit package)}

\item{covars}{A vector of covariate names for standardized mean differences
(SMD; covariate balance) calculation (see bal.tab() in cobalt package)}

\item{h}{Bandwidth parameter
(will be calculated corresponding to kernel function if not specified)}

\item{krn}{Kernel function.
"triang": triangular density on (-3, 3),
"dnorm": standard normal density,
"dnorm_t": truncated standard normal density on (-3, 3).}

\item{Large}{The cohort size is so large that it has to be divided into pieces. Default is FALSE.}

\item{rm.s}{Remove unmatched survey units or not. Default is FALSE.}
}
\value{
A list \cr
pswt: A dataframe including KW pseudo-weights for each tuning parameter setting \cr
smds: A vector of SMD for each set of KW pseudo-weights \cr
p_score_c: A dataframe including propensity scores for non-probability sample units
for each tuning parameter setting \cr
p_score_s: A dataframe including propensity scores for probability sample units
for each tuning parameter setting
}
\description{
This function computes KW pseudo-weights using conditional random forests
(cforest() in partykit package) to predict propensity scores.
}
